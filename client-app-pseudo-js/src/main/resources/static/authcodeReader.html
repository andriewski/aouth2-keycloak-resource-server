<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Code reader</title>
</head>
<body>
<h1>Auth code reader page</h1>

<script>
    (() => {
        let urlParams = new URLSearchParams(window.location.search);
        let authCode = urlParams.get('code'),
            state = urlParams.get('state'),
            error = urlParams.get('error'),
            errorDescription = urlParams.get('errorDescription');

        if (error) {
            window.alert(`The following error took place: ${error}. Description of error: ${errorDescription}`);
        } else {
            window.opener.postAuthorize(state, authCode);
        }

        window.close();
    })();
</script>
</body>
</html>